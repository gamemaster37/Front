<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <title>Gas Company!</title>
  </head>

  <style>
    body,
    html {
      height: 100%;
      margin: 0;
    }

    .bg {
      /* The image used */
      background-image: url("img/natural.jpg");
      /* display: grid; */
      /* Full height */
      /* Center and scale the image nicely */
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
    }

    #cardall {
      margin: auto;
      width: 90%;
      height: 80%;
      border-radius: 15px;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2),
        0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    .carousel-control-next-icon {
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='blue' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E");
    }

    .carousel-control-prev-icon {
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='blue' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E");
    }
  </style>

  <body onload="list()" class="bg">
    <nav class="navbar navbar-light bg-light mb-4" style="height: max-content;">
      <a class="navbar-brand" style="display: inline-flex;">
        <img
          src="/img/gas-natural.svg"
          width="60"
          height="60"
          class="d-inline-block"
          alt=""
        />
        <h2 class="pt-2" style="margin-left: 10%;">Caribean Gas</h2>
      </a>
    </nav>

    <div class="card" id="cardall">
      <div class="card-header">
        Aptitudes Test
      </div>
      <div class="card-body">
        <div
          id="carouselExampleControls"
          class="carousel slide"
          data-ride="carousel"
          data-interval="0"
          data-wrap="false"
        >
          <div class="carousel-inner text-justify" style="height: 60vh;">
            <div class="carousel-item active" id="question0">
              <!-- <div class="spinner-border text-primary" role="status">
              <span class="sr-only">Loading...</span></div> -->
          </div>
            <div class="carousel-item" id="question1"></div>
            <div class="carousel-item" id="question2"></div>
            <div class="carousel-item" id="question3"></div>
            <div class="carousel-item" id="question4"></div>
          </div>
          <a
            class="carousel-control-prev"
            data-toggle="tooltip"
            data-placement="bottom"
            title="Previous Slide"
            href="#carouselExampleControls"
            role="button"
            data-slide="prev"
            style="width: 10%;"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a
            class="carousel-control-next"
            data-toggle="tooltip"
            data-placement="bottom"
            title="Next Slide"
            href="#carouselExampleControls"
            role="button"
            data-slide="next"
            style="width: 10%;"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
          <div class="row align-items-center">
            <!-- <div class="col-sm-7" style="margin-left: 10.5%;">
              <div class="progress">
                <div
                  class="progress-bar progress-bar-striped"
                  role="progressbar"
                  style="width: 25%;"
                  aria-valuenow="25"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
              </div> -->
            </div>
            <div class="col-sm-2 offset-sm-9">
              <a class="btn btn-primary" onclick="getcheck()" role="button"
                >Send Test</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <!--sweetAlert2-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <!-- Firebase js -->
    <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-database.js"></script>
    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyBQnFZIdOu1iHflA3TSQX5-uqAoEunf66E",
        authDomain: "parcial-2-de682.firebaseapp.com",
        databaseURL: "https://parcial-2-de682.firebaseio.com",
        projectId: "parcial-2-de682",
        storageBucket: "parcial-2-de682.appspot.com",
        messagingSenderId: "605657635467",
        appId: "1:605657635467:web:c2269af816af101420d28e",
        measurementId: "G-DE561MK6M7",
      };
      // Initialize Firebase

      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>
    <script src="js/questions.js"></script>
    <script>
      var quest;
      async function list() {
        quest = await getQuestion();
        var i = 0;
        quest.forEach((element) => {
          var ele = document.getElementById("question" + i);
          i++;
          var myvar =
            "<div class='container' style='margin-left:10%; width: 80%;'>" +
            "    <h1>Question " +
            i +
            "</h1>" +
            "    <h3 class='mb-4'>" +
            element.question +
            "</h3>" +
            "    <div class='container' style='margin-left:5%;'>" +
            "        <div class='form-check mb-2'>" +
            "            <input class='form-check-input' type='radio' name='exampleRadios" +
            i +
            "'" +
            "                value='0'>" +
            "            <label class='form-check-label' for='exampleRadios2'>" +
            element.panswer[0] +
            "            </label>" +
            "        </div>" +
            "        <div class='form-check mb-2'>" +
            "            <input class='form-check-input' type='radio' name='exampleRadios" +
            i +
            "'" +
            "                value='1'>" +
            "            <label class='form-check-label' for='exampleRadios2'>" +
            element.panswer[1] +
            "            </label>" +
            "        </div>" +
            "        <div class='form-check mb-2'>" +
            "            <input class='form-check-input' type='radio' name='exampleRadios" +
            i +
            "'" +
            "                value='2'>" +
            "            <label class='form-check-label' for='exampleRadios2'>" +
            element.panswer[2] +
            "            </label>" +
            "        </div>" +
            "        <div class='form-check mb-3'>" +
            "            <input class='form-check-input' type='radio' name='exampleRadios" +
            i +
            "'" +
            "                value='3'>" +
            "            <label class='form-check-label' for='exampleRadios2'>" +
            element.panswer[3] +
            "            </label>" +
            "        </div>" +
            "    </div>" +
            "</div>";
          ele.innerHTML = myvar;
        });
      }
      function getcheck() {
        var rates = [];
        Array.from(document.getElementsByClassName("form-check-input")).forEach(
          function (element) {
            if (element.checked) {
              rates.push(parseInt(element.value));
            }
          }
        );
        if (rates.length < 5) {
          Swal.fire({
            icon: "error",
            title: "Test Incomplete",
          });
        } else {
          [grade, total] = calcGrade(rates);
          var answer = {
            answer: rates,
            grade: grade,
            total: total,
            date: new Date().getTime()
          };
          Swal.fire({
            icon: "success",
            title: "Test Completed",
          }).then(() => {
            addAnswer(answer);
          });
        }
      }

      function calcGrade(rates) {
        var score = 0,
          total = 0,
          i = 0;
        quest.forEach(function (element) {
          if (element.answer == rates[i]) {
            score += element.value;
          }
          total += element.value;
          i++;
        });
        return [score, total];
      }
    </script>
  </body>
</html>
